var firstSlide,fs,highlight,jade,marked,path,presentation,renderer,slides,template;fs=require("fs"),path=require("path"),marked=require("marked"),jade=require("jade"),renderer=new marked.Renderer,firstSlide=!0,renderer.paragraph=function(a){return"!slide"===a&&firstSlide?(firstSlide=!1,"<section>\n"):"!slide"===a?"</section>\n<section>\n":"<p>"+a+"</p>\n"},highlight=function(a,b,c){return require("pygmentize-bundled")({lang:b,format:"html"},a,function(a,b){return c(a,b.toString())})},marked.setOptions({highligh:highlight,renderer:renderer}),slides=path.join(__dirname+"/../templates/slides.md"),template=path.join(__dirname+"/../templates/index.jade"),presentation=path.join(__dirname+"/../presentation/index.html"),fs.readFile(slides,function(a,b){if(a)throw a;return marked(b.toString(),function(a,b){if(a)throw a;return jade.renderFile(template,{content:b,pretty:!0},function(a,b){if(a)throw a;return fs.writeFile(presentation,b,function(a){return console.log(a?a:"File was written.")})})})});